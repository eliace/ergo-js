{"version":3,"sources":["node_modules/maquette/dist/maquette.umd.js","src/core/Utils.js","src/core/Options.js","src/core/Layout.js","src/core/Text.js","src/core/Rules.js","node_modules/classnames/index.js","src/core/Html.js","src/core/index.js","src/index.js","src/bulma/components/Section.js","src/bulma/components/index.js","src/bulma/layouts/ContainerLayout.js","src/bulma/layouts/MediaLayout.js","src/bulma/layouts/LevelLayout.js","src/bulma/layouts/index.js","src/bulma/elements/Box.js","src/bulma/elements/Button.js","src/bulma/elements/Content.js","src/bulma/elements/Delete.js","src/bulma/elements/Icon.js","src/bulma/elements/Image.js","src/bulma/elements/Notification.js","src/bulma/elements/Progress.js","src/bulma/elements/Table.js","src/bulma/elements/Tag.js","src/bulma/elements/Title.js","src/bulma/elements/index.js","src/bulma/index.js","app.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/css-loader.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["deepClone","o","constructor","Object","copy","i","Array","length","buildProp","prop","nextProp","rule","buildOpts","undefined","opts","nextOpts","rules","path","defaultFactory","item","defaultType","ItemClass","type","alias","etype","ensure","obj","value","Options","_raw","merge","concat","push","_rules","Layout","options","c","html","props","combine","children","sort","compare","map","child","render","a","b","w1","weight","w2","i1","index","i2","Text","text","k","v","Option","x","y","OptionCollection","kv","OptionArray","StringArray","arr","module","exports","DEFAULT_RULES","defaultItem","defaultComponent","components","as","DEFAULT_EVENTS","onClick","Html","proto","getPrototypeOf","hasOwnProperty","chain","cls","defaultOpts","classOpts","build","layout","state","OPTIONS","desc","init","call","join","content","console","log","assign","styles","height","e","extOpts","compKey","substr","addComponent","items","addItem","vnode","split","key","shift","name","$content","set","descriptors","rerender","parent","itemOpts","j","removeComponent","compOpts","comp","remove","removed","classes","class","unset","prototype","optDesc","aaa","projector","target","root","append","Section","ContainerLayout","wrapper","MediaLayout","left","right","forEach","mediaLeft","mediaRight","sorted","pop","LevelLayout","centerItems","leftItems","rightItems","level","Layouts","Container","Media","Level","Box","Button","Content","Delete","Icon","FaIcon","Fa","Image","src","Notification","Progress","Table","Tag","Title","app","$header","$media","$avatar","$nav","$deleteBtn","setTimeout","opt","scheduleRender","document","addEventListener","body","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","bundle","require","updateLink","link","newLink","cloneNode","onload","href","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","OVERLAY_ID","OldModule","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","hmrAcceptRun","window","reload","close","onclose","removeErrorOverlay","error","message","overlay","createErrorOverlay","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","d","dep","isArray","Function","deps","cached","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACr2BA,IAAMA,SAAS,GAAG,SAAZA,SAAY,CAACC,CAAD,EAAO;AACvB,MAAIA,CAAC,IAAI,IAAT,EAAe;AACb,QAAIA,CAAC,CAACC,WAAF,KAAkBC,MAAtB,EAA8B;AAC5B,UAAMC,IAAI,GAAG,EAAb;;AACA,WAAK,IAAIC,CAAT,IAAcJ,CAAd,EAAiB;AACfG,QAAAA,IAAI,CAACC,CAAD,CAAJ,GAAUL,SAAS,CAACC,CAAC,CAACI,CAAD,CAAF,CAAnB;AACD;;AACDJ,MAAAA,CAAC,GAAGG,IAAJ;AACD,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","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (factory((global.maquette = {})));\n}(this, (function (exports) { 'use strict';\n\n    /* tslint:disable no-http-string */\r\n    var NAMESPACE_W3 = 'http://www.w3.org/';\r\n    /* tslint:enable no-http-string */\r\n    var NAMESPACE_SVG = NAMESPACE_W3 + \"2000/svg\";\r\n    var NAMESPACE_XLINK = NAMESPACE_W3 + \"1999/xlink\";\r\n    var emptyArray = [];\r\n    var extend = function (base, overrides) {\r\n        var result = {};\r\n        Object.keys(base).forEach(function (key) {\r\n            result[key] = base[key];\r\n        });\r\n        if (overrides) {\r\n            Object.keys(overrides).forEach(function (key) {\r\n                result[key] = overrides[key];\r\n            });\r\n        }\r\n        return result;\r\n    };\r\n    var same = function (vnode1, vnode2) {\r\n        if (vnode1.vnodeSelector !== vnode2.vnodeSelector) {\r\n            return false;\r\n        }\r\n        if (vnode1.properties && vnode2.properties) {\r\n            if (vnode1.properties.key !== vnode2.properties.key) {\r\n                return false;\r\n            }\r\n            return vnode1.properties.bind === vnode2.properties.bind;\r\n        }\r\n        return !vnode1.properties && !vnode2.properties;\r\n    };\r\n    var checkStyleValue = function (styleValue) {\r\n        if (typeof styleValue !== 'string') {\r\n            throw new Error('Style values must be strings');\r\n        }\r\n    };\r\n    var findIndexOfChild = function (children, sameAs, start) {\r\n        if (sameAs.vnodeSelector !== '') {\r\n            // Never scan for text-nodes\r\n            for (var i = start; i < children.length; i++) {\r\n                if (same(children[i], sameAs)) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    var checkDistinguishable = function (childNodes, indexToCheck, parentVNode, operation) {\r\n        var childNode = childNodes[indexToCheck];\r\n        if (childNode.vnodeSelector === '') {\r\n            return; // Text nodes need not be distinguishable\r\n        }\r\n        var properties = childNode.properties;\r\n        var key = properties ? (properties.key === undefined ? properties.bind : properties.key) : undefined;\r\n        if (!key) { // A key is just assumed to be unique\r\n            for (var i = 0; i < childNodes.length; i++) {\r\n                if (i !== indexToCheck) {\r\n                    var node = childNodes[i];\r\n                    if (same(node, childNode)) {\r\n                        throw new Error(parentVNode.vnodeSelector + \" had a \" + childNode.vnodeSelector + \" child \" + (operation === 'added' ? operation : 'removed') + \", but there is now more than one. You must add unique key properties to make them distinguishable.\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    var nodeAdded = function (vNode) {\r\n        if (vNode.properties) {\r\n            var enterAnimation = vNode.properties.enterAnimation;\r\n            if (enterAnimation) {\r\n                enterAnimation(vNode.domNode, vNode.properties);\r\n            }\r\n        }\r\n    };\r\n    var removedNodes = [];\r\n    var requestedIdleCallback = false;\r\n    var visitRemovedNode = function (node) {\r\n        (node.children || []).forEach(visitRemovedNode);\r\n        if (node.properties && node.properties.afterRemoved) {\r\n            node.properties.afterRemoved.apply(node.properties.bind || node.properties, [node.domNode]);\r\n        }\r\n    };\r\n    var processPendingNodeRemovals = function () {\r\n        requestedIdleCallback = false;\r\n        removedNodes.forEach(visitRemovedNode);\r\n        removedNodes.length = 0;\r\n    };\r\n    var scheduleNodeRemoval = function (vNode) {\r\n        removedNodes.push(vNode);\r\n        if (!requestedIdleCallback) {\r\n            requestedIdleCallback = true;\r\n            if (typeof window !== 'undefined' && 'requestIdleCallback' in window) {\r\n                window.requestIdleCallback(processPendingNodeRemovals, { timeout: 16 });\r\n            }\r\n            else {\r\n                setTimeout(processPendingNodeRemovals, 16);\r\n            }\r\n        }\r\n    };\r\n    var nodeToRemove = function (vNode) {\r\n        var domNode = vNode.domNode;\r\n        if (vNode.properties) {\r\n            var exitAnimation = vNode.properties.exitAnimation;\r\n            if (exitAnimation) {\r\n                domNode.style.pointerEvents = 'none';\r\n                var removeDomNode = function () {\r\n                    if (domNode.parentNode) {\r\n                        domNode.parentNode.removeChild(domNode);\r\n                        scheduleNodeRemoval(vNode);\r\n                    }\r\n                };\r\n                exitAnimation(domNode, removeDomNode, vNode.properties);\r\n                return;\r\n            }\r\n        }\r\n        if (domNode.parentNode) {\r\n            domNode.parentNode.removeChild(domNode);\r\n            scheduleNodeRemoval(vNode);\r\n        }\r\n    };\r\n    var setProperties = function (domNode, properties, projectionOptions) {\r\n        if (!properties) {\r\n            return;\r\n        }\r\n        var eventHandlerInterceptor = projectionOptions.eventHandlerInterceptor;\r\n        var propNames = Object.keys(properties);\r\n        var propCount = propNames.length;\r\n        var _loop_1 = function (i) {\r\n            var propName = propNames[i];\r\n            var propValue = properties[propName];\r\n            if (propName === 'className') {\r\n                throw new Error('Property \"className\" is not supported, use \"class\".');\r\n            }\r\n            else if (propName === 'class') {\r\n                toggleClasses(domNode, propValue, true);\r\n            }\r\n            else if (propName === 'classes') {\r\n                // object with string keys and boolean values\r\n                var classNames = Object.keys(propValue);\r\n                var classNameCount = classNames.length;\r\n                for (var j = 0; j < classNameCount; j++) {\r\n                    var className = classNames[j];\r\n                    if (propValue[className]) {\r\n                        domNode.classList.add(className);\r\n                    }\r\n                }\r\n            }\r\n            else if (propName === 'styles') {\r\n                // object with string keys and string (!) values\r\n                var styleNames = Object.keys(propValue);\r\n                var styleCount = styleNames.length;\r\n                for (var j = 0; j < styleCount; j++) {\r\n                    var styleName = styleNames[j];\r\n                    var styleValue = propValue[styleName];\r\n                    if (styleValue) {\r\n                        checkStyleValue(styleValue);\r\n                        projectionOptions.styleApplyer(domNode, styleName, styleValue);\r\n                    }\r\n                }\r\n            }\r\n            else if (propName !== 'key' && propValue !== null && propValue !== undefined) {\r\n                var type = typeof propValue;\r\n                if (type === 'function') {\r\n                    if (propName.lastIndexOf('on', 0) === 0) { // lastIndexOf(,0)===0 -> startsWith\r\n                        if (eventHandlerInterceptor) {\r\n                            propValue = eventHandlerInterceptor(propName, propValue, domNode, properties); // intercept eventhandlers\r\n                        }\r\n                        if (propName === 'oninput') {\r\n                            /* tslint:disable no-this-keyword no-invalid-this only-arrow-functions no-void-expression */\r\n                            (function () {\r\n                                // record the evt.target.value, because IE and Edge sometimes do a requestAnimationFrame between changing value and running oninput\r\n                                var oldPropValue = propValue;\r\n                                propValue = function (evt) {\r\n                                    oldPropValue.apply(this, [evt]);\r\n                                    evt.target['oninput-value'] = evt.target.value; // may be HTMLTextAreaElement as well\r\n                                };\r\n                            }());\r\n                            /* tslint:enable */\r\n                        }\r\n                        domNode[propName] = propValue;\r\n                    }\r\n                }\r\n                else if (projectionOptions.namespace === NAMESPACE_SVG) {\r\n                    if (propName === 'href') {\r\n                        domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\r\n                    }\r\n                    else {\r\n                        // all SVG attributes are read-only in DOM, so...\r\n                        domNode.setAttribute(propName, propValue);\r\n                    }\r\n                }\r\n                else if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\r\n                    domNode.setAttribute(propName, propValue);\r\n                }\r\n                else {\r\n                    domNode[propName] = propValue;\r\n                }\r\n            }\r\n        };\r\n        for (var i = 0; i < propCount; i++) {\r\n            _loop_1(i);\r\n        }\r\n    };\r\n    var addChildren = function (domNode, children, projectionOptions) {\r\n        if (!children) {\r\n            return;\r\n        }\r\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\r\n            var child = children_1[_i];\r\n            createDom(child, domNode, undefined, projectionOptions);\r\n        }\r\n    };\r\n    var initPropertiesAndChildren = function (domNode, vnode, projectionOptions) {\r\n        addChildren(domNode, vnode.children, projectionOptions); // children before properties, needed for value property of <select>.\r\n        if (vnode.text) {\r\n            domNode.textContent = vnode.text;\r\n        }\r\n        setProperties(domNode, vnode.properties, projectionOptions);\r\n        if (vnode.properties && vnode.properties.afterCreate) {\r\n            vnode.properties.afterCreate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\r\n        }\r\n    };\r\n    var createDom = function (vnode, parentNode, insertBefore, projectionOptions) {\r\n        var domNode;\r\n        var start = 0;\r\n        var vnodeSelector = vnode.vnodeSelector;\r\n        var doc = parentNode.ownerDocument;\r\n        if (vnodeSelector === '') {\r\n            domNode = vnode.domNode = doc.createTextNode(vnode.text);\r\n            if (insertBefore !== undefined) {\r\n                parentNode.insertBefore(domNode, insertBefore);\r\n            }\r\n            else {\r\n                parentNode.appendChild(domNode);\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i <= vnodeSelector.length; ++i) {\r\n                var c = vnodeSelector.charAt(i);\r\n                if (i === vnodeSelector.length || c === '.' || c === '#') {\r\n                    var type = vnodeSelector.charAt(start - 1);\r\n                    var found = vnodeSelector.slice(start, i);\r\n                    if (type === '.') {\r\n                        domNode.classList.add(found);\r\n                    }\r\n                    else if (type === '#') {\r\n                        domNode.id = found;\r\n                    }\r\n                    else {\r\n                        if (found === 'svg') {\r\n                            projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\r\n                        }\r\n                        if (projectionOptions.namespace !== undefined) {\r\n                            domNode = vnode.domNode = doc.createElementNS(projectionOptions.namespace, found);\r\n                        }\r\n                        else {\r\n                            domNode = vnode.domNode = (vnode.domNode || doc.createElement(found));\r\n                            if (found === 'input' && vnode.properties && vnode.properties.type !== undefined) {\r\n                                // IE8 and older don't support setting input type after the DOM Node has been added to the document\r\n                                domNode.setAttribute('type', vnode.properties.type);\r\n                            }\r\n                        }\r\n                        if (insertBefore !== undefined) {\r\n                            parentNode.insertBefore(domNode, insertBefore);\r\n                        }\r\n                        else if (domNode.parentNode !== parentNode) {\r\n                            parentNode.appendChild(domNode);\r\n                        }\r\n                    }\r\n                    start = i + 1;\r\n                }\r\n            }\r\n            initPropertiesAndChildren(domNode, vnode, projectionOptions);\r\n        }\r\n    };\r\n    var updateDom;\r\n    /**\r\n     * Adds or removes classes from an Element\r\n     * @param domNode the element\r\n     * @param classes a string separated list of classes\r\n     * @param on true means add classes, false means remove\r\n     */\r\n    var toggleClasses = function (domNode, classes, on) {\r\n        if (!classes) {\r\n            return;\r\n        }\r\n        classes.split(' ').forEach(function (c) { return domNode.classList.toggle(c, on); });\r\n    };\r\n    var updateProperties = function (domNode, previousProperties, properties, projectionOptions) {\r\n        if (!properties) {\r\n            return;\r\n        }\r\n        var propertiesUpdated = false;\r\n        var propNames = Object.keys(properties);\r\n        var propCount = propNames.length;\r\n        for (var i = 0; i < propCount; i++) {\r\n            var propName = propNames[i];\r\n            // assuming that properties will be nullified instead of missing is by design\r\n            var propValue = properties[propName];\r\n            var previousValue = previousProperties[propName];\r\n            if (propName === 'class') {\r\n                if (previousValue !== propValue) {\r\n                    toggleClasses(domNode, previousValue, false);\r\n                    toggleClasses(domNode, propValue, true);\r\n                }\r\n            }\r\n            else if (propName === 'classes') {\r\n                var classList = domNode.classList;\r\n                var classNames = Object.keys(propValue);\r\n                var classNameCount = classNames.length;\r\n                for (var j = 0; j < classNameCount; j++) {\r\n                    var className = classNames[j];\r\n                    var on = !!propValue[className];\r\n                    var previousOn = !!previousValue[className];\r\n                    if (on === previousOn) {\r\n                        continue;\r\n                    }\r\n                    propertiesUpdated = true;\r\n                    if (on) {\r\n                        classList.add(className);\r\n                    }\r\n                    else {\r\n                        classList.remove(className);\r\n                    }\r\n                }\r\n            }\r\n            else if (propName === 'styles') {\r\n                var styleNames = Object.keys(propValue);\r\n                var styleCount = styleNames.length;\r\n                for (var j = 0; j < styleCount; j++) {\r\n                    var styleName = styleNames[j];\r\n                    var newStyleValue = propValue[styleName];\r\n                    var oldStyleValue = previousValue[styleName];\r\n                    if (newStyleValue === oldStyleValue) {\r\n                        continue;\r\n                    }\r\n                    propertiesUpdated = true;\r\n                    if (newStyleValue) {\r\n                        checkStyleValue(newStyleValue);\r\n                        projectionOptions.styleApplyer(domNode, styleName, newStyleValue);\r\n                    }\r\n                    else {\r\n                        projectionOptions.styleApplyer(domNode, styleName, '');\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (!propValue && typeof previousValue === 'string') {\r\n                    propValue = '';\r\n                }\r\n                if (propName === 'value') { // value can be manipulated by the user directly and using event.preventDefault() is not an option\r\n                    var domValue = domNode[propName];\r\n                    if (domValue !== propValue // The 'value' in the DOM tree !== newValue\r\n                        && (domNode['oninput-value']\r\n                            ? domValue === domNode['oninput-value'] // If the last reported value to 'oninput' does not match domValue, do nothing and wait for oninput\r\n                            : propValue !== previousValue // Only update the value if the vdom changed\r\n                        )) {\r\n                        // The edge cases are described in the tests\r\n                        domNode[propName] = propValue; // Reset the value, even if the virtual DOM did not change\r\n                        domNode['oninput-value'] = undefined;\r\n                    } // else do not update the domNode, otherwise the cursor position would be changed\r\n                    if (propValue !== previousValue) {\r\n                        propertiesUpdated = true;\r\n                    }\r\n                }\r\n                else if (propValue !== previousValue) {\r\n                    var type = typeof propValue;\r\n                    if (type !== 'function' || !projectionOptions.eventHandlerInterceptor) { // Function updates are expected to be handled by the EventHandlerInterceptor\r\n                        if (projectionOptions.namespace === NAMESPACE_SVG) {\r\n                            if (propName === 'href') {\r\n                                domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\r\n                            }\r\n                            else {\r\n                                // all SVG attributes are read-only in DOM, so...\r\n                                domNode.setAttribute(propName, propValue);\r\n                            }\r\n                        }\r\n                        else if (type === 'string' && propName !== 'innerHTML') {\r\n                            if (propName === 'role' && propValue === '') {\r\n                                domNode.removeAttribute(propName);\r\n                            }\r\n                            else {\r\n                                domNode.setAttribute(propName, propValue);\r\n                            }\r\n                        }\r\n                        else if (domNode[propName] !== propValue) { // Comparison is here for side-effects in Edge with scrollLeft and scrollTop\r\n                            domNode[propName] = propValue;\r\n                        }\r\n                        propertiesUpdated = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return propertiesUpdated;\r\n    };\r\n    var updateChildren = function (vnode, domNode, oldChildren, newChildren, projectionOptions) {\r\n        if (oldChildren === newChildren) {\r\n            return false;\r\n        }\r\n        oldChildren = oldChildren || emptyArray;\r\n        newChildren = newChildren || emptyArray;\r\n        var oldChildrenLength = oldChildren.length;\r\n        var newChildrenLength = newChildren.length;\r\n        var oldIndex = 0;\r\n        var newIndex = 0;\r\n        var i;\r\n        var textUpdated = false;\r\n        while (newIndex < newChildrenLength) {\r\n            var oldChild = (oldIndex < oldChildrenLength) ? oldChildren[oldIndex] : undefined;\r\n            var newChild = newChildren[newIndex];\r\n            if (oldChild !== undefined && same(oldChild, newChild)) {\r\n                textUpdated = updateDom(oldChild, newChild, projectionOptions) || textUpdated;\r\n                oldIndex++;\r\n            }\r\n            else {\r\n                var findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\r\n                if (findOldIndex >= 0) {\r\n                    // Remove preceding missing children\r\n                    for (i = oldIndex; i < findOldIndex; i++) {\r\n                        nodeToRemove(oldChildren[i]);\r\n                        checkDistinguishable(oldChildren, i, vnode, 'removed');\r\n                    }\r\n                    textUpdated = updateDom(oldChildren[findOldIndex], newChild, projectionOptions) || textUpdated;\r\n                    oldIndex = findOldIndex + 1;\r\n                }\r\n                else {\r\n                    // New child\r\n                    createDom(newChild, domNode, (oldIndex < oldChildrenLength) ? oldChildren[oldIndex].domNode : undefined, projectionOptions);\r\n                    nodeAdded(newChild);\r\n                    checkDistinguishable(newChildren, newIndex, vnode, 'added');\r\n                }\r\n            }\r\n            newIndex++;\r\n        }\r\n        if (oldChildrenLength > oldIndex) {\r\n            // Remove child fragments\r\n            for (i = oldIndex; i < oldChildrenLength; i++) {\r\n                nodeToRemove(oldChildren[i]);\r\n                checkDistinguishable(oldChildren, i, vnode, 'removed');\r\n            }\r\n        }\r\n        return textUpdated;\r\n    };\r\n    updateDom = function (previous, vnode, projectionOptions) {\r\n        var domNode = previous.domNode;\r\n        var textUpdated = false;\r\n        if (previous === vnode) {\r\n            return false; // By contract, VNode objects may not be modified anymore after passing them to maquette\r\n        }\r\n        var updated = false;\r\n        if (vnode.vnodeSelector === '') {\r\n            if (vnode.text !== previous.text) {\r\n                var newTextNode = domNode.ownerDocument.createTextNode(vnode.text);\r\n                domNode.parentNode.replaceChild(newTextNode, domNode);\r\n                vnode.domNode = newTextNode;\r\n                textUpdated = true;\r\n                return textUpdated;\r\n            }\r\n            vnode.domNode = domNode;\r\n        }\r\n        else {\r\n            if (vnode.vnodeSelector.lastIndexOf('svg', 0) === 0) { // lastIndexOf(needle,0)===0 means StartsWith\r\n                projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\r\n            }\r\n            if (previous.text !== vnode.text) {\r\n                updated = true;\r\n                if (vnode.text === undefined) {\r\n                    domNode.removeChild(domNode.firstChild); // the only textnode presumably\r\n                }\r\n                else {\r\n                    domNode.textContent = vnode.text;\r\n                }\r\n            }\r\n            vnode.domNode = domNode;\r\n            updated = updateChildren(vnode, domNode, previous.children, vnode.children, projectionOptions) || updated;\r\n            updated = updateProperties(domNode, previous.properties, vnode.properties, projectionOptions) || updated;\r\n            if (vnode.properties && vnode.properties.afterUpdate) {\r\n                vnode.properties.afterUpdate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\r\n            }\r\n        }\r\n        if (updated && vnode.properties && vnode.properties.updateAnimation) {\r\n            vnode.properties.updateAnimation(domNode, vnode.properties, previous.properties);\r\n        }\r\n        return textUpdated;\r\n    };\r\n    var createProjection = function (vnode, projectionOptions) {\r\n        return {\r\n            getLastRender: function () { return vnode; },\r\n            update: function (updatedVnode) {\r\n                if (vnode.vnodeSelector !== updatedVnode.vnodeSelector) {\r\n                    throw new Error('The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)');\r\n                }\r\n                var previousVNode = vnode;\r\n                vnode = updatedVnode;\r\n                updateDom(previousVNode, updatedVnode, projectionOptions);\r\n            },\r\n            domNode: vnode.domNode\r\n        };\r\n    };\n\n    var DEFAULT_PROJECTION_OPTIONS = {\r\n        namespace: undefined,\r\n        performanceLogger: function () { return undefined; },\r\n        eventHandlerInterceptor: undefined,\r\n        styleApplyer: function (domNode, styleName, value) {\r\n            // Provides a hook to add vendor prefixes for browsers that still need it.\r\n            domNode.style[styleName] = value;\r\n        }\r\n    };\r\n    var applyDefaultProjectionOptions = function (projectorOptions) {\r\n        return extend(DEFAULT_PROJECTION_OPTIONS, projectorOptions);\r\n    };\r\n    var dom = {\r\n        /**\r\n         * Creates a real DOM tree from `vnode`. The [[Projection]] object returned will contain the resulting DOM Node in\r\n         * its [[Projection.domNode|domNode]] property.\r\n         * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n         * objects may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the projection.\r\n         * @returns The [[Projection]] which also contains the DOM Node that was created.\r\n         */\r\n        create: function (vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            createDom(vnode, document.createElement('div'), undefined, projectionOptions);\r\n            return createProjection(vnode, projectionOptions);\r\n        },\r\n        /**\r\n         * Appends a new child node to the DOM which is generated from a [[VNode]].\r\n         * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n         * @param parentNode - The parent node for the new child node.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n         * objects may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the [[Projection]].\r\n         * @returns The [[Projection]] that was created.\r\n         */\r\n        append: function (parentNode, vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            createDom(vnode, parentNode, undefined, projectionOptions);\r\n            return createProjection(vnode, projectionOptions);\r\n        },\r\n        /**\r\n         * Inserts a new DOM node which is generated from a [[VNode]].\r\n         * This is a low-level method. Users wil typically use a [[Projector]] instead.\r\n         * @param beforeNode - The node that the DOM Node is inserted before.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function.\r\n         * NOTE: [[VNode]] objects may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\r\n         * @returns The [[Projection]] that was created.\r\n         */\r\n        insertBefore: function (beforeNode, vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            createDom(vnode, beforeNode.parentNode, beforeNode, projectionOptions);\r\n            return createProjection(vnode, projectionOptions);\r\n        },\r\n        /**\r\n         * Merges a new DOM node which is generated from a [[VNode]] with an existing DOM Node.\r\n         * This means that the virtual DOM and the real DOM will have one overlapping element.\r\n         * Therefore the selector for the root [[VNode]] will be ignored, but its properties and children will be applied to the Element provided.\r\n         * This is a low-level method. Users wil typically use a [[Projector]] instead.\r\n         * @param element - The existing element to adopt as the root of the new virtual DOM. Existing attributes and child nodes are preserved.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]] objects\r\n         * may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\r\n         * @returns The [[Projection]] that was created.\r\n         */\r\n        merge: function (element, vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            vnode.domNode = element;\r\n            initPropertiesAndChildren(element, vnode, projectionOptions);\r\n            return createProjection(vnode, projectionOptions);\r\n        },\r\n        /**\r\n         * Replaces an existing DOM node with a node generated from a [[VNode]].\r\n         * This is a low-level method. Users will typically use a [[Projector]] instead.\r\n         * @param element - The node for the [[VNode]] to replace.\r\n         * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\r\n         * objects may only be rendered once.\r\n         * @param projectionOptions - Options to be used to create and update the [[Projection]].\r\n         * @returns The [[Projection]] that was created.\r\n         */\r\n        replace: function (element, vnode, projectionOptions) {\r\n            projectionOptions = applyDefaultProjectionOptions(projectionOptions);\r\n            createDom(vnode, element.parentNode, element, projectionOptions);\r\n            element.parentNode.removeChild(element);\r\n            return createProjection(vnode, projectionOptions);\r\n        }\r\n    };\n\n    /* tslint:disable function-name */\r\n    var toTextVNode = function (data) {\r\n        return {\r\n            vnodeSelector: '',\r\n            properties: undefined,\r\n            children: undefined,\r\n            text: data.toString(),\r\n            domNode: null\r\n        };\r\n    };\r\n    var appendChildren = function (parentSelector, insertions, main) {\r\n        for (var i = 0, length_1 = insertions.length; i < length_1; i++) {\r\n            var item = insertions[i];\r\n            if (Array.isArray(item)) {\r\n                appendChildren(parentSelector, item, main);\r\n            }\r\n            else {\r\n                if (item !== null && item !== undefined && item !== false) {\r\n                    if (typeof item === 'string') {\r\n                        item = toTextVNode(item);\r\n                    }\r\n                    main.push(item);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    function h(selector, properties, children) {\r\n        if (Array.isArray(properties)) {\r\n            children = properties;\r\n            properties = undefined;\r\n        }\r\n        else if ((properties && (typeof properties === 'string' || properties.hasOwnProperty('vnodeSelector'))) ||\r\n            (children && (typeof children === 'string' || children.hasOwnProperty('vnodeSelector')))) {\r\n            throw new Error('h called with invalid arguments');\r\n        }\r\n        var text;\r\n        var flattenedChildren;\r\n        // Recognize a common special case where there is only a single text node\r\n        if (children && children.length === 1 && typeof children[0] === 'string') {\r\n            text = children[0];\r\n        }\r\n        else if (children) {\r\n            flattenedChildren = [];\r\n            appendChildren(selector, children, flattenedChildren);\r\n            if (flattenedChildren.length === 0) {\r\n                flattenedChildren = undefined;\r\n            }\r\n        }\r\n        return {\r\n            vnodeSelector: selector,\r\n            properties: properties,\r\n            children: flattenedChildren,\r\n            text: (text === '') ? undefined : text,\r\n            domNode: null\r\n        };\r\n    }\n\n    var createParentNodePath = function (node, rootNode) {\r\n        var parentNodePath = [];\r\n        while (node !== rootNode) {\r\n            parentNodePath.push(node);\r\n            node = node.parentNode;\r\n        }\r\n        return parentNodePath;\r\n    };\r\n    var find;\r\n    if (Array.prototype.find) {\r\n        find = function (items, predicate) { return items.find(predicate); };\r\n    }\r\n    else {\r\n        find = function (items, predicate) { return items.filter(predicate)[0]; };\r\n    }\r\n    var findVNodeByParentNodePath = function (vnode, parentNodePath) {\r\n        var result = vnode;\r\n        parentNodePath.forEach(function (node) {\r\n            result = (result && result.children) ? find(result.children, function (child) { return child.domNode === node; }) : undefined;\r\n        });\r\n        return result;\r\n    };\r\n    var createEventHandlerInterceptor = function (projector, getProjection, performanceLogger) {\r\n        var modifiedEventHandler = function (evt) {\r\n            performanceLogger('domEvent', evt);\r\n            var projection = getProjection();\r\n            var parentNodePath = createParentNodePath(evt.currentTarget, projection.domNode);\r\n            parentNodePath.reverse();\r\n            var matchingVNode = findVNodeByParentNodePath(projection.getLastRender(), parentNodePath);\r\n            projector.scheduleRender();\r\n            var result;\r\n            if (matchingVNode) {\r\n                /* tslint:disable no-invalid-this */\r\n                result = matchingVNode.properties[\"on\" + evt.type].apply(matchingVNode.properties.bind || this, arguments);\r\n                /* tslint:enable no-invalid-this */\r\n            }\r\n            performanceLogger('domEventProcessed', evt);\r\n            return result;\r\n        };\r\n        return function (propertyName, eventHandler, domNode, properties) { return modifiedEventHandler; };\r\n    };\r\n    /**\r\n     * Creates a [[Projector]] instance using the provided projectionOptions.\r\n     *\r\n     * For more information, see [[Projector]].\r\n     *\r\n     * @param projectorOptions   Options that influence how the DOM is rendered and updated.\r\n     */\r\n    var createProjector = function (projectorOptions) {\r\n        var projector;\r\n        var projectionOptions = applyDefaultProjectionOptions(projectorOptions);\r\n        var performanceLogger = projectionOptions.performanceLogger;\r\n        var renderCompleted = true;\r\n        var scheduled;\r\n        var stopped = false;\r\n        var projections = [];\r\n        var renderFunctions = []; // matches the projections array\r\n        var addProjection = function (\r\n        /* one of: dom.append, dom.insertBefore, dom.replace, dom.merge */\r\n        domFunction, \r\n        /* the parameter of the domFunction */\r\n        node, renderFunction) {\r\n            var projection;\r\n            var getProjection = function () { return projection; };\r\n            projectionOptions.eventHandlerInterceptor = createEventHandlerInterceptor(projector, getProjection, performanceLogger);\r\n            projection = domFunction(node, renderFunction(), projectionOptions);\r\n            projections.push(projection);\r\n            renderFunctions.push(renderFunction);\r\n        };\r\n        var doRender = function () {\r\n            scheduled = undefined;\r\n            if (!renderCompleted) {\r\n                return; // The last render threw an error, it should have been logged in the browser console.\r\n            }\r\n            renderCompleted = false;\r\n            performanceLogger('renderStart', undefined);\r\n            for (var i = 0; i < projections.length; i++) {\r\n                var updatedVnode = renderFunctions[i]();\r\n                performanceLogger('rendered', undefined);\r\n                projections[i].update(updatedVnode);\r\n                performanceLogger('patched', undefined);\r\n            }\r\n            performanceLogger('renderDone', undefined);\r\n            renderCompleted = true;\r\n        };\r\n        projector = {\r\n            renderNow: doRender,\r\n            scheduleRender: function () {\r\n                if (!scheduled && !stopped) {\r\n                    scheduled = requestAnimationFrame(doRender);\r\n                }\r\n            },\r\n            stop: function () {\r\n                if (scheduled) {\r\n                    cancelAnimationFrame(scheduled);\r\n                    scheduled = undefined;\r\n                }\r\n                stopped = true;\r\n            },\r\n            resume: function () {\r\n                stopped = false;\r\n                renderCompleted = true;\r\n                projector.scheduleRender();\r\n            },\r\n            append: function (parentNode, renderFunction) {\r\n                addProjection(dom.append, parentNode, renderFunction);\r\n            },\r\n            insertBefore: function (beforeNode, renderFunction) {\r\n                addProjection(dom.insertBefore, beforeNode, renderFunction);\r\n            },\r\n            merge: function (domNode, renderFunction) {\r\n                addProjection(dom.merge, domNode, renderFunction);\r\n            },\r\n            replace: function (domNode, renderFunction) {\r\n                addProjection(dom.replace, domNode, renderFunction);\r\n            },\r\n            detach: function (renderFunction) {\r\n                for (var i = 0; i < renderFunctions.length; i++) {\r\n                    if (renderFunctions[i] === renderFunction) {\r\n                        renderFunctions.splice(i, 1);\r\n                        return projections.splice(i, 1)[0];\r\n                    }\r\n                }\r\n                throw new Error('renderFunction was not found');\r\n            }\r\n        };\r\n        return projector;\r\n    };\n\n    /**\r\n     * Creates a [[CalculationCache]] object, useful for caching [[VNode]] trees.\r\n     * In practice, caching of [[VNode]] trees is not needed, because achieving 60 frames per second is almost never a problem.\r\n     * For more information, see [[CalculationCache]].\r\n     *\r\n     * @param <Result> The type of the value that is cached.\r\n     */\r\n    var createCache = function () {\r\n        var cachedInputs;\r\n        var cachedOutcome;\r\n        return {\r\n            invalidate: function () {\r\n                cachedOutcome = undefined;\r\n                cachedInputs = undefined;\r\n            },\r\n            result: function (inputs, calculation) {\r\n                if (cachedInputs) {\r\n                    for (var i = 0; i < inputs.length; i++) {\r\n                        if (cachedInputs[i] !== inputs[i]) {\r\n                            cachedOutcome = undefined;\r\n                        }\r\n                    }\r\n                }\r\n                if (!cachedOutcome) {\r\n                    cachedOutcome = calculation();\r\n                    cachedInputs = inputs;\r\n                }\r\n                return cachedOutcome;\r\n            }\r\n        };\r\n    };\n\n    /**\r\n     * Creates a {@link Mapping} instance that keeps an array of result objects synchronized with an array of source objects.\r\n     * See {@link http://maquettejs.org/docs/arrays.html|Working with arrays}.\r\n     *\r\n     * @param <Source>       The type of source items. A database-record for instance.\r\n     * @param <Target>       The type of target items. A [[MaquetteComponent]] for instance.\r\n     * @param getSourceKey   `function(source)` that must return a key to identify each source object. The result must either be a string or a number.\r\n     * @param createResult   `function(source, index)` that must create a new result object from a given source. This function is identical\r\n     *                       to the `callback` argument in `Array.map(callback)`.\r\n     * @param updateResult   `function(source, target, index)` that updates a result to an updated source.\r\n     */\r\n    var createMapping = function (getSourceKey, createResult, updateResult) {\r\n        var keys = [];\r\n        var results = [];\r\n        return {\r\n            results: results,\r\n            map: function (newSources) {\r\n                var newKeys = newSources.map(getSourceKey);\r\n                var oldTargets = results.slice();\r\n                var oldIndex = 0;\r\n                for (var i = 0; i < newSources.length; i++) {\r\n                    var source = newSources[i];\r\n                    var sourceKey = newKeys[i];\r\n                    if (sourceKey === keys[oldIndex]) {\r\n                        results[i] = oldTargets[oldIndex];\r\n                        updateResult(source, oldTargets[oldIndex], i);\r\n                        oldIndex++;\r\n                    }\r\n                    else {\r\n                        var found = false;\r\n                        for (var j = 1; j < keys.length + 1; j++) {\r\n                            var searchIndex = (oldIndex + j) % keys.length;\r\n                            if (keys[searchIndex] === sourceKey) {\r\n                                results[i] = oldTargets[searchIndex];\r\n                                updateResult(newSources[i], oldTargets[searchIndex], i);\r\n                                oldIndex = searchIndex + 1;\r\n                                found = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (!found) {\r\n                            results[i] = createResult(source, i);\r\n                        }\r\n                    }\r\n                }\r\n                results.length = newSources.length;\r\n                keys = newKeys;\r\n            }\r\n        };\r\n    };\n\n    exports.dom = dom;\n    exports.h = h;\n    exports.createProjector = createProjector;\n    exports.createCache = createCache;\n    exports.createMapping = createMapping;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","\n\nconst deepClone = (o) => {\n  if (o != null) {\n    if (o.constructor === Object) {\n      const copy = {}\n      for (let i in o) {\n        copy[i] = deepClone(o[i])\n      }\n      o = copy\n    }\n    else if (o.constructor === Array) {\n      const copy = []\n      for (let i = 0; i < o.length; i++) {\n        copy[i] = deepClone(o[i])\n      }\n      o = copy\n    }\n  }\n  return o\n//  return JSON.parse(JSON.stringify(o))\n}\n\n\n\nexport const buildProp = (prop, nextProp, rule) => {\n\n  if (rule) {\n    prop = rule(prop, nextProp)\n  }\n  else {\n    if (prop && (prop.constructor === Object || prop.constructor === Array)) {\n      prop = buildOpts(prop, nextProp)\n    }\n    else if (nextProp !== undefined) {\n      if (nextProp.constructor === Object || nextProp.constructor === Array) {\n        prop = deepClone(nextProp)\n//        console.log('deep', nextProp, prop)\n      }\n      else {\n        prop = nextProp\n      }\n    }\n  }\n\n  return prop\n}\n\n\n\n\nexport const buildOpts = (opts, nextOpts, rules, path) => {\n\n  // если nextOpts является объектом\n  if (nextOpts.constructor === Object) {\n    for (let i in nextOpts) {\n      opts[i] = buildProp(opts[i], nextOpts[i], rules && rules[i])\n    }\n  }\n  // если nextOpts является массивом\n  else if (nextOpts.constructor === Array) {\n    for (let i = 0; i < nextOpts.length; i++) {\n      opts[i] = buildProp(opts[i], nextOpts[i], rules && rules[i])\n    }\n  }\n  else if (nextOpts !== undefined) {\n    opts = nextOpts\n  }\n\n  return opts\n}\n\n\nexport const defaultFactory = (item, defaultType) => {\n\n  var ItemClass = null\n\n  if (typeof item === 'function') {\n    ItemClass = item\n  }\n  else if (item) {\n    ItemClass = item.type || item.alias || item.etype  || defaultType\n  }\n  else {\n    item = {}\n    ItemClass = defaultType\n  }\n\n  if (typeof ItemClass === 'string') {\n    ItemClass = alias(ItemClass)\n  }\n\n  return new ItemClass(item)\n}\n\n\nexport const ensure = (obj, path, value) => {\n\n}\n","import {buildOpts} from './Utils'\n\n\nconst Options = class {\n\n  constructor(...args) {\n\n    this._raw = []\n\n    for (let i = 0; i < args.length; i++) {\n      this.merge(args[i])  //FIXME  потенциальная потеря производительности\n    }\n  }\n\n  merge(nextOpts) {\n    if (nextOpts) {\n      if (nextOpts instanceof Options) {\n        this._raw = this._raw.concat(nextOpts._raw)\n      }\n      else {\n        this._raw.push(nextOpts)\n      }\n    }\n    return this\n  }\n\n  build(rules) {\n\n    let o = {}\n\n    for (let i = 0; i < this._raw.length; i++) {\n      o = buildOpts(o, this._raw[i], rules || this._rules)\n    }\n\n    return o\n  }\n\n  with(rules) {\n    this._rules = rules\n  }\n\n\n}\n\n\nexport default Options\n","import {h} from 'maquette'\n\nconst Layout = class {\n\n  constructor(o={}) {\n    this.options = o\n  }\n\n  render(c) {\n//    return this.combine(c.children.sort(this.compare))\n    // return {\n    //   props: c.props,\n    //   children: this.combine(c.children.sort(this.compare))\n    // }\n    return h(c.html, c.props, this.combine(c.children.sort(this.compare)))\n  }\n\n  // renderText(c) {\n  //   return h(c.html, c.props, [c.text])\n  // }\n\n  combine(children) {\n    return children.map(child => child.render())\n  }\n\n  compare(a, b) {\n    const w1 = a.options.weight || 0\n    const w2 = b.options.weight || 0\n    if (w1 == w2) {\n      const i1 = a.index || 0\n      const i2 = b.index || 0\n      return i1 - i2\n    }\n    return w1 - w2\n  }\n\n}\n\nexport default Layout\n","\n\nconst Text = class {\n\n  constructor(text) {\n    this.options = {}\n    this.props = {}\n    this.value = text\n  }\n\n  render() {\n    return this.value\n  }\n\n  set(k, v) {\n    if (k == 'text') {\n      this.value = v\n    }\n  }\n\n}\n\nexport default Text\n","import Options from './Options'\n\nconst Option = (x, y) => {return new Options(x, y)}\n\nconst OptionCollection = (x, y) => {\n  let kv = {}\n  if (x != null) {\n    for (let i in x) {\n      kv[i] = new Options(x[i])\n    }\n  }\n  if (y != null) {\n//    console.log('y', y)\n    for (let i in y) {\n      kv[i] = kv[i] ? kv[i].merge(y[i]) : new Options(y[i])\n    }\n  }\n//  console.log(kv)\n  return kv\n}\n\nconst OptionArray = (x, y) => {\n  // TODO\n}\n\nconst StringArray = (x, y) => {\n  let arr = []\n  if (x != null) {\n    arr = x\n  }\n  if (y != null) {\n    arr = arr.concat(y)\n  }\n  return arr\n}\n\n\nmodule.exports = {\n  Option,\n  OptionCollection,\n  OptionArray,\n  StringArray\n}\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import Options from './Options'\nimport {defaultFactory} from './Utils'\nimport Layout from './Layout'\nimport Text from './Text'\nimport rules from './Rules'\nimport classNames from 'classnames'\nimport {h} from 'maquette'\n\n\nconst DEFAULT_RULES = {\n  defaultItem: rules.Option,\n  defaultComponent: rules.Option,\n  // items: rules.OptionArray,\n  components: rules.OptionCollection,\n  as: rules.StringArray\n}\n\nconst DEFAULT_EVENTS = {\n  onClick: 'onclick'\n}\n\nconst Html = class {\n\n  static OPTIONS = {}\n\n  constructor(options={}) {\n\n    var proto = Object.getPrototypeOf(this)\n\n    //  собираем опции класса, если они еще не собраны\n    if (!proto.hasOwnProperty('classOpts')) {\n\n      var chain = []\n\n      var cls = proto\n\n      while (cls && cls.constructor !== Object) {\n        chain.push(cls.defaultOpts || cls.constructor.defaultOpts)\n        cls = Object.getPrototypeOf(cls)\n      }\n\n      var classOpts = new Options()\n\n      for (let i = chain.length-1; i >= 0; i--) {\n        // добавляем только в том случае, когда опции не наследуются\n        if (chain[i] != chain[i+1]) {\n          classOpts.merge(chain[i])\n        }\n      }\n\n      proto.classOpts = classOpts.build(DEFAULT_RULES)\n    }\n\n    let opts = new Options(this.classOpts, options).build(DEFAULT_RULES)\n\n    this.html = opts.html || 'div'\n\n    this.children = []\n\n    this.props = opts.props || {}\n\n    this.layout = opts.layout ? defaultFactory(opts.layout, Layout) : null\n\n    this.state = {}\n\n//    console.log(opts)\n\n    // инициализация свойств\n\n    for (var i in opts) {\n      var o = opts[i]\n\n      if (this.constructor.OPTIONS[i]) {\n        const desc = this.constructor.OPTIONS[i]\n        if (desc.init) {\n          desc.init.call(this, opts[i], opts)\n        }\n      }\n      else if (i == 'as') {\n        if (o.length) {\n          this.props['class'] = classNames(this.props['class'], o.join(' '))\n        }\n      }\n      else if (i == 'text') {\n        if (opts.components && opts.components.content) {\n          console.log(opts)\n          opts.components.content.merge({text: o})  //FIXME\n        }\n        else {\n          this.text = o\n    //      this.$content = new Text(o)\n    //      this.children.push(this.$content)\n        }\n      }\n      else if (i == 'styles') {\n        this.props['styles'] = Object.assign(this.props['styles'] || {}, o)\n      }\n      else if (i == 'height') {\n        this.props.styles = this.props.styles || {}\n        this.props.styles.height = (typeof o === 'string') ? o : o+'px'\n      }\n      else if (DEFAULT_EVENTS[i]) {\n        this.props[DEFAULT_EVENTS[i]] = (e) => o(e, this)\n    //        Events.on(this, DEFAULT_EVENTS[i], o)\n      }\n    }\n\n\n    // постобработка \"сахарных\" опций\n\n    let extOpts = {}\n\n    for (var i in opts) {\n      var o = opts[i]\n\n      if (i[0] == '$') {\n        // ленивая инициализация расширенных опций компонентов\n        extOpts['components'] = extOpts['components'] || {}\n\n        var compKey = i.substr(1)\n        extOpts['components'][compKey] = o\n      }\n    }\n\n    opts = new Options(opts, extOpts).build(DEFAULT_RULES)\n\n    this.options = opts\n\n    // создание компонентов и элементов\n\n    if (opts.components) {\n      for (var i in opts.components) {\n        this.addComponent(i, opts.components[i])\n//         var compOpts = new Options(opts.defaultComponent, opts.components[i]).build(DEFAULT_RULES)\n// //        console.log('compOpts', opts.components, compOpts)\n//         const comp = defaultFactory(compOpts, Html)\n//         comp.props.key = i\n// //        comp.index = 0\n//         comp.parent = this\n//         this.children.push(comp)\n//         this['$'+i] = comp\n      }\n    }\n\n    if (opts.items) {\n      for (var i = 0; i < opts.items.length; i++) {\n        this.addItem(opts.items[i], i)\n//         let itemOpts = new Options(opts.defaultItem, opts.items[i]).build(DEFAULT_RULES)\n//         const item = defaultFactory(itemOpts, Html)\n//         item.key = ''+i\n// //        item.index = i\n//         item.parent = this\n//         this.children.push(item)\n      }\n    }\n\n\n\n\n//    console.log('desc', this.constructor.optDesc)\n//    console.log(opts)\n\n  }\n\n\n\n  render() {\n//    console.log('render', this)\n    if (this.children.length) {\n      if (this.layout == null) {\n        this.layout = defaultFactory(this.options.layout, Layout)\n      }\n      this.vnode = this.vnode || this.layout.render(this)\n    }\n    else {\n      this.vnode = this.vnode || h(this.html, this.props, [this.text])\n    }\n    return this.vnode\n  }\n\n  child(path) {\n\n    if (typeof path === 'string') {\n      path = path.split('.')\n    }\n\n    let key = path.shift()\n    for (let i = 0; i < this.children.length; i++) {\n      let c = this.children[i]\n      if (c.props.key == key) {\n        return path.length ? c.child(path) : c\n      }\n    }\n\n    return null\n  }\n\n  opt(name, v) {\n\n    if (this.options[name] == v) {\n      return this\n    }\n\n    this.options[name] = v\n\n    if (name == 'text') {\n      if (this.$content) {\n        this.$content.set('text', v)\n      }\n      else {\n        this.text = v\n        // this.$content = new Text(v)\n        // this.children.push(this.$content)\n      }\n    }\n    else if (name == 'html') {\n      this.html = v\n    }\n    else if (this.constructor.descriptors[name]) {\n      const desc = this.constructor.descriptors[name]\n      if (desc.set) {\n        desc.set.call(this, v)\n      }\n    }\n    this.rerender()\n    return this\n  }\n\n  rerender() {\n    let c = this\n    while (c && c.vnode) {\n      delete c.vnode\n      c = c.parent\n    }\n  }\n\n  addItem(o, i) {\n    if (this.options.defaultItem && typeof o === 'string') {\n      o = {text: o}\n    }\n    let itemOpts = new Options(this.options.defaultItem, o).build(DEFAULT_RULES)\n//    console.log('add', o, itemOpts)\n    const item = defaultFactory(itemOpts, (typeof itemOpts === 'string') ? Text : Html)\n    this.children.push(item)\n    if (i == null) {\n      i = 0\n      // ищем максимальный индекс\n      for (let j = this.children.length-1; j >= 0; j--) {\n        let child = this.children[j]\n        if (child.index > 0) {\n          i = child.index+1\n          break\n        }\n      }\n    }\n    item.props.key = 'item-'+i\n    item.index = i\n    item.parent = this\n\n    if (this.vnode) {\n      this.rerender()\n    }\n\n    return item\n  }\n\n  addComponent(i, o) {\n    if (this['$'+i]) {\n      this.removeComponent(i)\n    }\n    var compOpts = new Options(this.options.defaultComponent, o).build(DEFAULT_RULES)\n//    console.log('set', o, compOpts)\n    const comp = defaultFactory(compOpts, (typeof o === 'string') ? Text : Html)\n    this.children.push(comp)\n    comp.props.key = i\n//        comp.index = 0\n    comp.parent = this\n    this['$'+i] = comp\n\n    if (this.vnode) {\n      this.rerender()\n    }\n\n    return comp\n  }\n\n  removeComponent(key) {\n    let child = (typeof key === 'object') ? key : this['$'+key]\n\n    if (child) {\n      this.children.remove(child)\n    }\n    else {\n      let removed = false\n      for(let i = 0; i < this.children.length; i++) {\n        let c = this.children[i]\n        if (c.index == key) {\n          child = c\n          this.children.remove(c)\n          removed = true\n        }\n        else if (removed && c.index) {\n          c.index--\n        }\n      }\n    }\n\n    if (this.vnode) {\n      this.rerender()\n    }\n\n    return child\n  }\n\n  removeItem(i) {\n    // TODO\n  }\n\n\n  set(i) {\n    this.state[i] = true\n//    this.props.class = classNames(this.props.class, i)\n    this.props.classes = this.props.classes || {}\n    this.props.classes[i] = true\n\n    if (this.vnode) {\n      this.rerender()\n    }\n  }\n\n  unset(i) {\n    delete this.state[i]\n    this.props.class = classNames(this.props.class, {i: false})\n\n    if (this.vnode) {\n      this.rerender()\n    }\n  }\n\n  toggle(i) {\n    this.state[i] ? unset(i) : set(i)\n  }\n\n  is(i) {\n    return this.state[i]\n  }\n\n}\n\nHtml.prototype.optDesc = {\n  aaa: {}\n}\n\n\nexport default Html\n","import Html from './Html'\nimport Layout from './Layout'\nimport Options from './Options'\n\nexport {\n  Html,\n  Layout,\n  Options\n}\n","import {createProjector} from 'maquette'\nimport {Html} from './core'\n//import {Section} from './bulma'\n\nconst projector = createProjector()\n\nfunction init(target, root) {\n  projector.append(target, root)\n}\n\nexport {init, Html}\n","import {Html} from '../../core'\n//import styles from 'bulma/css/bulma.css'\n\nclass Section extends Html {\n\n}\n\nSection.prototype.defaultOpts = {\n  html: 'section',\n  props: {\n    class: 'section'\n  }\n}\n\nexport default Section\n","import Section from './Section'\n\n\nexport {Section}\n","import {Layout} from '../../core'\nimport {h} from 'maquette'\n\nclass ContainerLayout extends Layout {\n\n  render(c) {\n    const wrapper = h('div.container', this.combine(c.children.sort(this.compare)))\n    return h(c.html, c.props, [wrapper])\n  }\n}\n\nexport default ContainerLayout\n","import {Layout} from '../../core'\nimport {h} from 'maquette'\n\nclass MediaLayout extends Layout {\n\n  render(c) {\n    const content = []\n    let left = null\n    let right = null\n    c.children.forEach(child => {\n      if (child.options.mediaLeft) {\n        left = child\n      }\n      else if (child.options.mediaRight) {\n        right = child\n      }\n      else {\n        content.push(child)\n      }\n    })\n    const sorted = content.sort(this.compare)\n    if (left == null) {\n      left = sorted.shift()\n    }\n    if (right == null) {\n      right = sorted.pop()\n    }\n    return h(c.html+'.media', c.props, [\n      h('div.media-left', [left.render()]),\n      h('div.media-content', this.combine(sorted)),\n      h('div.media-right', [right.render()])\n    ])\n  }\n}\n\nexport default MediaLayout\n","import {Layout} from '../../core'\nimport {h} from 'maquette'\n\nclass LevelLayout extends Layout {\n\n  render(c) {\n    let centerItems = []\n    let leftItems = []\n    let rightItems = []\n    c.children.forEach(child => {\n      if (child.options.level == 'left') {\n        leftItems.push(child)\n      }\n      else if (child.options.level == 'right') {\n        rightItems.push(child)\n      }\n      else {\n        centerItems.push(child)\n      }\n    })\n    if (leftItems.length) {\n      leftItems = [h('div.level-left', this.combine(leftItems))]\n    }\n    if (rightItems.length) {\n      rightItems = [h('div.level-right', this.combine(rightItems))]\n    }\n    centerItems = this.combine(centerItems)\n//    console.log(centerItems.length)\n    return h(c.html+'.level', c.props, leftItems.concat(centerItems).concat(rightItems))\n  }\n\n  combine(children, level) {\n    return children.sort(this.compare).map(child => h('div.level-item', [child.render()]))\n  }\n}\n\nexport default LevelLayout\n","import Container from './ContainerLayout'\nimport Media from './MediaLayout'\nimport Level from './LevelLayout'\n\nconst Layouts = {\n  Container,\n  Media,\n  Level\n}\n\nexport {Layouts}\n","import {Html} from '../../core'\n\nexport default class Box extends Html {\n\n  static defaultOpts = {\n    props: {\n      class: 'box'\n    }\n  }\n\n}\n","import {Html} from '../../core'\n\nexport default class Button extends Html {\n\n  static defaultOpts = {\n    html: 'button',\n    props: {\n      class: 'button'\n    }\n  }\n\n}\n","import {Html} from '../../core'\n\nexport default class Content extends Html {\n\n  static defaultOpts = {\n    props: {\n      class: 'content'\n    }\n  }\n\n}\n","import {Html} from '../../core'\n\nexport default class Delete extends Html {\n\n  static defaultOpts = {\n    html: 'a',\n    props: {\n      class: 'delete'\n    }\n  }\n\n}\n","import {Html} from '../../core'\nimport 'font-awesome/scss/font-awesome.scss'\n\nclass Icon extends Html {\n\n  static defaultOpts = {\n    html: 'span',\n    props: {\n      class: 'icon'\n    }\n  }\n\n}\n\n\nclass FaIcon extends Icon {\n  static defaultOpts = {\n    components: {\n      content: {\n        html: 'i.fa'\n      }\n    }\n  }\n  static OPTIONS = {\n    text: {\n      init: function(v, o) {\n        o.components.content.merge({as: 'fa-'+v})\n      }\n    }\n  }\n}\n\nIcon.Fa = FaIcon\n\nexport default Icon\n","import {Html} from '../../core'\n\nclass Image extends Html {\n\n  static defaultOpts = {\n    html: 'figure',\n    props: {\n      class: 'image'\n    },\n    components: {\n      content: {\n        html: 'img'\n      }\n    }\n  }\n\n  static OPTIONS = {\n    ...Html.OPTIONS,\n    src: {\n      init: function(v, o) {\n        o.components.content.merge({props: {src: v}})\n      }\n    }\n  }\n\n}\n\nexport default Image\n","import {Html} from '../../core'\n\nclass Notification extends Html {\n\n  static defaultOpts = {\n    props: {\n      class: 'notification'\n    }\n  }\n\n}\n\nexport default Notification\n","import {Html} from '../../core'\n\nexport default class Progress extends Html {\n\n  static defaultOpts = {\n    html: 'progress',\n    props: {\n      class: 'progress'\n    }\n  }\n\n}\n","import {Html} from '../../core'\n\nexport default class Table extends Html {\n\n  static defaultOpts = {\n    html: 'table',\n    props: {\n      class: 'table'\n    }\n  }\n\n}\n","import {Html} from '../../core'\n\nexport default class Tag extends Html {\n\n  static defaultOpts = {\n    html: 'span',\n    props: {\n      class: 'tag'\n    }\n  }\n\n}\n","import {Html} from '../../core'\n\nclass Title extends Html {\n\n  static defaultOpts = {\n    as: 'title'\n  }\n\n}\n\n\nexport default Title\n","import Box from './Box'\nimport Button from './Button'\nimport Content from './Content'\nimport Delete from './Delete'\nimport Icon from './Icon'\nimport Image from './Image'\nimport Notification from './Notification'\nimport Progress from './Progress'\nimport Table from './Table'\nimport Tag from './Tag'\nimport Title from './Title'\n\nexport {\n  Box,\n  Button,\n  Content,\n  Delete,\n  Icon,\n  Image,\n  Notification,\n  Progress,\n  Table,\n  Tag,\n  Title\n}\n","export * from './components'\nexport * from './layouts'\nexport * from './elements'\n\nimport 'bulma'\n","import {init, Html} from './src'\nimport {createProjector} from 'maquette'\nimport {Layouts, Section, ContainerLayout, Notification, MediaLayout, Image, Button, Delete, LevelLayout, Icon} from './src/bulma'\n\nconsole.log(Layouts)\n\nconst projector = createProjector()\n\nconst app = new Html({\n//  components: {\n    $header: {\n      type: Section,\n      layout: Layouts.Container,\n//      components: {\n      $content: {\n        type: Notification,\n        items: ['This container is ', {html: 'strong', text: 'centered', props: {class: 'aaa'}}, ' on desktop.']\n      }\n    },\n    $media: {\n      type: Section,\n      layout: Layouts.Container,\n      $content: {\n        html: 'article',\n        layout: Layouts.Media,\n        $avatar: {\n          type: Image,\n          as: 'is-64x64',\n          src: 'https://bulma.io/images/placeholders/128x128.png'\n        },\n        $content: {\n          props: {\n            class: 'content'\n          },\n          $content: {\n            html: 'p',\n            items: [\n              {html: 'strong', text: 'John Smith'},\n              ' ',\n              {html: 'small', text: '@johnsmit'},\n              ' ',\n              {html: 'small', text: '31m'},\n              {html: 'br'},\n              'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin ornare magna eros, eu pellentesque tortor vestibulum ut. Maecenas non massa sem. Etiam finibus odio quis feugiat facilisis.'\n            ]\n          },\n          $nav: {\n            html: 'nav',\n            layout: Layouts.Level,\n            defaultItem: {\n              type: Icon.Fa,\n              html: 'a',\n              as: 'is-small',\n              level: 'left'\n            },\n            items: [\n              'reply',\n              'retweet',\n              'heart'\n            ]\n          }\n        },\n        $deleteBtn: {\n          type: Delete,\n          html: 'button',\n          onClick: (e) => {console.log('delete')}\n        }\n      }\n    }\n//      }\n//  }\n})\n\nconsole.log(app)\n\nsetTimeout(() => {\n  const c = app.child('header.content.item-1')\n  c.opt('html', 'i')\n  c.set('test')\n  projector.scheduleRender()\n}, 3000)\n\n/*\nconst c = new Html({\n  components: {\n    before: {\n      text: '[',\n      weight: -10\n    },\n    after: {\n      text: ']',\n      weight: 10\n    },\n    content: {\n      defaultItem: {\n        styles: {\n          color: '#ff0000'\n        }\n      },\n      items: [{\n        text: 'Alice'\n      }, {\n        text: 'Bob'\n      }, {\n        text: 'Charlie',\n        styles: {\n          color: '#0000ff'\n        }\n      }]\n    },\n    button: {\n      html: 'button',\n      as: 'button is-primary',\n      text: 'Press me',\n      weight: 11,\n      onClick: (e, comp) => {\n        c.get('before').opt('text', '(')\n        c.$after.opt('text', ')')\n      }\n    }\n  }\n})\n\n\nsetTimeout(() => {\n  c.$content.add({\n    text: 'Dave',\n    styles: {\n      fontSize: '2rem'\n    }\n  })\n  projector.scheduleRender()\n}, 3000)\n*/\n\nconst render = () => {\n  return app.render()\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  projector.append(document.body, render);\n});\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}